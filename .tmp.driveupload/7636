## 1. 변수(Variables)를 통한 '단일 소스(Single-Source)' 전략 구현

대시보드 엔지니어링의 핵심 목표는 유지보수 비용을 줄이고 확장성을 확보하는 것입니다. 수백 개의 서버나 서비스를 모니터링할 때 각각에 대해 별도의 대시보드를 만드는 것은 비효율적입니다.

- **하드코딩 제거:** 동적 대시보드는 쿼리에 서버 이름이나 애플리케이션 ID를 하드코딩하는 대신 **변수(Template Variables)**를 사용합니다. 사용자가 드롭다운 메뉴에서 값을 변경하면, 연결된 모든 패널의 쿼리가 즉시 업데이트되어 새로운 데이터를 반영합니다.

- **다양한 변수 유형의 전략적 활용:**

	- **Query 변수:** 데이터 소스에서 실시간으로 메트릭 이름, 서버 목록, 태그 값 등을 동적으로 가져옵니다. 예를 들어, Prometheus에서 `label_values(instance)` 쿼리를 사용해 현재 활성화된 인스턴스 목록을 자동으로 채웁니다.  
    - **Data Source 변수:** 개발(Dev), 스테이징(Stage), 운영(Prod) 환경이 서로 다른 데이터 소스를 사용할 때, 대시보드 하나로 데이터 소스만 바꿔가며 모든 환경을 모니터링할 수 있게 합니다.  
    - **Interval 변수:** 시간 범위에 따라 데이터 집계(Aggregation) 간격을 동적으로 조정합니다(예: `1m`, `1h`). 이는 긴 기간을 조회할 때 쿼리 성능을 최적화하고 시각화의 가독성을 높이는 데 필수적입니다.

## 2. 자동화된 레이아웃: 패널 반복(Repeating Panels)

동적 대시보드는 사용자의 선택에 따라 UI 구조 자체가 변화합니다. 이는 대시보드 엔지니어링에서 **"확장성(Scalability)"**을 시각적으로 구현하는 방법입니다.

- **동적 생성:** 변수에서 'All' 또는 여러 값을 선택했을 때, Grafana는 **반복(Repeat)** 기능을 통해 선택된 각 값에 대한 패널이나 행(Row)을 자동으로 생성합니다.

- **방향 제어:** 수평(Horizontal) 또는 수직(Vertical) 반복을 설정하여, 서버가 10개든 100개든 일관된 레이아웃을 유지하며 모니터링할 수 있습니다. 이는 인프라가 오토스케일링(Auto-scaling)으로 확장될 때 대시보드를 수동으로 수정할 필요가 없게 만듭니다.

## 3. 상호작용 및 탐색 최적화 (Guided Navigation)

동적 대시보드는 사용자가 데이터를 수동으로 검색하는 것이 아니라, 설계된 경로를 따라 탐색하도록 유도합니다.

- **체인 변수(Chained Variables):** 변수 간에 계층적 의존성을 설정합니다. 예를 들어, 'Region' 변수를 선택하면 'Cluster' 변수의 목록이 해당 리전의 클러스터로만 필터링되고, 다시 'Pod' 변수는 해당 클러스터의 파드만 보여줍니다. 이는 사용자가 존재하지 않는 조합을 쿼리하는 것을 방지하고 탐색 효율성을 높입니다.

- **데이터 링크(Data Links):** 패널의 특정 데이터 포인트를 클릭했을 때, 해당 컨텍스트(변수 값, 시간 범위)를 유지한 채 다른 상세 대시보드나 외부 시스템(로그, 트레이스)으로 이동하는 링크를 생성합니다. 이는 "개요(Overview)"에서 "세부 분석(Root Cause Analysis)"으로 이어지는 워크플로우를 기술적으로 구현합니다.

- **Ad Hoc 필터:** 쿼리를 직접 수정하지 않고도, 사용자가 UI에서 즉석으로 키/값(Key/Value) 쌍 필터를 추가하여 데이터를 좁혀갈 수 있게 합니다.

## 4. 성능 및 사용성 엔지니어링

대시보드가 동적으로 변할 때 발생할 수 있는 성능 문제를 관리하는 것도 중요한 엔지니어링 영역입니다.

- **검색 필터 최적화:** 카디널리티가 높은 변수(예: 수천 개의 호스트)의 경우, 드롭다운 로딩 속도를 높이기 위해 `__searchFilter` 기능을 사용하여 사용자가 입력한 검색어에 해당하는 값만 백엔드에 쿼리하도록 최적화합니다.

- **상태 공유:** 동적 대시보드의 현재 상태(선택된 변수, 시간 범위 등)는 URL 파라미터(`var-Server=web01`)로 동기화됩니다. 이를 통해 특정 문제 상황이 포착된 뷰를 팀원에게 URL 링크 하나로 정확하게 공유할 수 있습니다.

## 요약

대시보드 엔지니어링 관점에서 **동적 대시보드**를 구축한다는 것은 단순한 그래프 작성을 넘어, **"변수와 템플릿을 활용해 유지보수 소요를 최소화하고, 패널 반복을 통해 인프라 확장에 자동으로 대응하며, 데이터 링크와 체인 변수를 통해 사용자의 논리적 사고 흐름을 가이드하는 지능형 모니터링 애플리케이션"**을 개발하는 것을 의미합니다.
